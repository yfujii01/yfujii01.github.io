<nav class="navbar mr-auto fixed-top navbar-expand-lg navbar-light bg-light">
    <div class="cubespinner">
        <div class="face1">y</div>
        <div class="face2">f</div>
        <div class="face3">u</div>
        <div class="face4">j</div>
        <div class="face5">i</div>
        <div class="face6">i</div>
    </div>

    <!--ナビバータイトル-->
    <a class="navbar-brand title-str" href="#"></a>

    <!--横幅が狭くなった場合に表示されるメニュートグル-->
    <button class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <!--リンク-->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul id="nav-items-ul" class="navbar-nav mr-auto">
            <!--nav.jsonから読み込み-->
        </ul>
    </div>

</nav>

<script>
    //===============================
    // 起動時イベント
    //===============================
    $(function () {
        console.log('nav.js start!!');

        //===============================
        // JSONからナビアイテム作成
        //===============================
        $.getJSON("json/nav.json", function (data) {
            let ulObj = $("#nav-items-ul");
            let len = data.length;

            for (let i = 0; i < len; i++) {
                let item_li = $("<li>").attr({
                    "class": 'nav-item'
                });

                if (data[i].isActive == "true") {
                    item_li.addClass("active");
                }

                let item = item_li.append($("<a>").attr({
                        "class": "nav-link",
                        "data-linkpage": data[i].link
                    }).text(data[i].title)
                );

                ulObj.append(item);
            }

            //リンククリックイベントを追加
            eventLinkClick();
        });
    });

    function eventLinkClick() {
        //===============================
        //ナビバークリックイベント
        //===============================
        $('.nav-link').on('click', function () {
            // console.log('クリックされました！');
            var linkpage = this.dataset.linkpage.replace('.html', '');

            // スクロールの速度
            var speed = 400; // ミリ秒

            // 移動先情報取得
            let s = '.content-' + linkpage;
            var target = $(s);
            // 移動先を数値で取得
            var position = target.offset().top - 65;
            // スムーススクロール
            $('body,html').animate({scrollTop: position}, speed, 'swing');


            //アクティブなページをナビに設定
            $('.nav-item').removeClass("active");
            $(this).parent('li').addClass('active');
        });
    }
</script>

<style>
    .nav {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 60px;
        background-color: black;
        color: #cccccc;
        z-index: 2000;
    }

    .nav .cubespinner {
        position: fixed;
        top: 30px;
        left: 10px;
        z-index: 3000;
        color: black;
    }

    .navbar-brand {
        position: fixed;
        top: 0px;
        left: 0px;
        /*background-color: black;*/
    }

    .navbar-toggler {
        position: absolute;
        right: 50px;
        display: none;
    }

    .nav ul {
        position: absolute;
        top: 0px;
        left: 40px;
        /*background-color: antiquewhite;*/
    }

    .nav ul li {
        display: inline;
        margin-right: 1em;
    }

    /*ナビバーの非選択リンク*/
    .navbar-nav .nav-item .nav-link {
        color: gray;
    }

    /*ナビバーのアクティブリンク*/
    .navbar-nav .nav-item.active .nav-link {
        color: #15aaa1;
    }

    /*ナビバーのマウスオーバーリンク*/
    .navbar-nav .nav-item:hover .nav-link {
        color: aqua;
    }
</style>
